import{_ as ae,u as oe,o as ne,$ as se,r as I,a0 as ie,d as re,a as c,c as T,e as _,f as C,g as e,h as f,j as u,w as a,i,I as de,a1 as ue,W as pe,t as $,J as me,K as ce,l as q,F as z,k as _e,a2 as fe,L as ge,a3 as ve,a4 as M,a5 as be,P as ye,s as xe,Z as Ve,E as Ce,T as Ee,p as ke,q as we,v as he,x as Ue,y as Ie,z as $e,A as Ne,B as Fe,a6 as De,a7 as Se,a8 as Be,C as Le,D as Te}from"./index-gHtfuMJj.js";const qe={class:"btns"},ze={style:{display:"flex","align-items":"center"}},Me={style:{display:"flex","align-items":"center"}},Pe={style:{"margin-left":"10px"}},Re={class:"pagination-info"},Ye={class:"dialog-footer"},je={class:"image-list"},Ae=["onClick"],Oe={key:0,class:"select"},Ge={class:"dialog-footer"},He={__name:"index",setup(Je){const P=oe();ne(()=>{se().then(({data:o})=>{E=o.data}),b()});const g=I({pageNum:1,pageSize:10}),v=I({list:[],total:0}),b=()=>{ie(g).then(({data:o})=>{const{list:l,total:r}=o.data;l.forEach(s=>{s.create_time=re(s.create_time).format("YYYY-MM-DD")}),v.list=l,v.total=r})},y=c(!1),n=I({age:28,sex:"",avatar:"",active:1}),N=o=>{y.value=!0,ge(()=>{o&&Object.assign(n,o)})},F=()=>{y.value=!1,x.value.resetFields()},m=c(!1);let E=[];const k=c(0),R=o=>{n.avatar=E[k.value].url,m.value=!1,o.validateField("avatar")},Y=c({name:[{required:!0,trigger:"blur",message:"请填写昵称"}],avatar:[{required:!0,message:"请选择头像"}],sex:[{required:!0,trigger:"change",message:"请选择性别"}],mobile:[{required:!0,validator:(o,l,r)=>{l===""?r(new Error("请输入密码")):/^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/.test(l)?r():r(new Error("手机号格式不对,请输入正确手机号"))},trigger:"blur"}]}),x=c(),j=async o=>{o&&await o.validate((l,r)=>{l?ve(n).then(({data:s})=>{s.code===1e4&&(M.success("成功"),F(),b())}):console.log("error submit!",r)})},A=o=>{g.pageNum=o,b()},V=c([]),O=o=>{V.value=o,console.log(V)},G=()=>{if(!V.value.length)return M({showClose:!0,message:"请选择至少一个删除项",type:"warning"});be({id:V.value}).then(({data:o})=>{o.code===1e4&&b()})};return(o,l)=>{const r=ye,s=xe,H=Ve,d=Ce,w=Ee,J=ke,K=T("Clock"),D=we,W=he,Z=Ue,h=Ie,p=$e,S=Ne,Q=Fe,X=De,B=Se,ee=Be,le=Le,L=Te,te=T("Check");return _(),C(z,null,[e(r,{info:f(P)},null,8,["info"]),u("div",qe,[e(s,{onClick:l[0]||(l[0]=t=>N(null)),type:"primary",size:"small",icon:f(de)},{default:a(()=>[i("新增")]),_:1},8,["icon"]),e(H,{"confirm-button-text":"是","cancel-button-text":"否",icon:f(pe),"icon-color":"#626AEF",title:"是否确认删除？",onConfirm:G},{reference:a(()=>[e(s,{type:"danger",size:"small",icon:f(ue)},{default:a(()=>[i("删除")]),_:1},8,["icon"])]),_:1},8,["icon"])]),e(W,{data:v.list,stripe:"",style:{width:"100%"},onSelectionChange:O},{default:a(()=>[e(d,{type:"selection",width:"55"}),e(d,{label:"id",prop:"id"}),e(d,{label:"昵称",prop:"name"}),e(d,{label:"头像"},{default:a(t=>[e(w,{style:{width:"50px",height:"50px"},src:t.row.avatar},null,8,["src"])]),_:1}),e(d,{label:"性别"},{default:a(t=>[i($(t.row.sex==="1"?"男":"女"),1)]),_:1}),e(d,{label:"手机号",prop:"mobile"}),e(d,{label:"状态",prop:"active"},{default:a(t=>[u("div",ze,[e(J,{type:t.row.active?"success":"danger"},{default:a(()=>[i($(t.row.active?"正常":"失效"),1)]),_:2},1032,["type"])])]),_:1}),e(d,{label:"创建时间"},{default:a(t=>[u("div",Me,[e(D,null,{default:a(()=>[e(K)]),_:1}),u("span",Pe,$(t.row.create_time),1)])]),_:1}),e(d,{label:"操作"},{default:a(t=>[e(s,{type:"primary",onClick:U=>N(t.row)},{default:a(()=>[i("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),u("div",Re,[e(Z,{"current-page":g.pageNum,"onUpdate:currentPage":l[1]||(l[1]=t=>g.pageNum=t),size:"small",background:!1,layout:"total, prev, pager, next",total:v.total,onCurrentChange:A},null,8,["current-page","total"])]),e(L,{modelValue:y.value,"onUpdate:modelValue":l[11]||(l[11]=t=>y.value=t),"before-close":F,title:"陪护师",width:"500"},{footer:a(()=>[u("div",Ye,[e(s,{type:"primary",onClick:l[10]||(l[10]=t=>j(x.value))},{default:a(()=>[i(" 确认 ")]),_:1})])]),default:a(()=>[e(le,{"label-width":"100px","label-position":"left",model:n,rules:Y.value,ref_key:"formRef",ref:x},{default:a(()=>[me(e(p,{prop:"id"},{default:a(()=>[e(h,{modelValue:n.id,"onUpdate:modelValue":l[2]||(l[2]=t=>n.id=t),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1},512),[[ce,!1]]),e(p,{label:"昵称",prop:"name"},{default:a(()=>[e(h,{modelValue:n.name,"onUpdate:modelValue":l[3]||(l[3]=t=>n.name=t),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),e(p,{label:"头像",prop:"avatar"},{default:a(()=>[n.avatar?(_(),q(w,{key:1,style:{width:"100px",height:"100px"},src:n.avatar,onClick:l[5]||(l[5]=t=>m.value=!0)},null,8,["src"])):(_(),q(s,{key:0,onClick:l[4]||(l[4]=t=>m.value=!0),type:"primary"},{default:a(()=>[i("点击上传")]),_:1}))]),_:1}),e(p,{label:"性别",prop:"sex"},{default:a(()=>[e(Q,{modelValue:n.sex,"onUpdate:modelValue":l[6]||(l[6]=t=>n.sex=t),placeholder:"请选择性别"},{default:a(()=>[e(S,{label:"男",value:"1"}),e(S,{label:"女",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"年龄",prop:"age"},{default:a(()=>[e(X,{modelValue:n.age,"onUpdate:modelValue":l[7]||(l[7]=t=>n.age=t),min:18,max:50},null,8,["modelValue"])]),_:1}),e(p,{label:"手机号",prop:"mobile"},{default:a(()=>[e(h,{modelValue:n.mobile,"onUpdate:modelValue":l[8]||(l[8]=t=>n.mobile=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),e(p,{label:"是否生效",prop:"active"},{default:a(()=>[e(ee,{modelValue:n.active,"onUpdate:modelValue":l[9]||(l[9]=t=>n.active=t)},{default:a(()=>[e(B,{value:0},{default:a(()=>[i("失效")]),_:1}),e(B,{value:1},{default:a(()=>[i("生效")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(L,{modelValue:m.value,"onUpdate:modelValue":l[14]||(l[14]=t=>m.value=t),title:"选择图片",width:"680"},{footer:a(()=>[u("div",Ge,[e(s,{onClick:l[12]||(l[12]=t=>m.value=!1)},{default:a(()=>[i("取消")]),_:1}),e(s,{type:"primary",onClick:l[13]||(l[13]=t=>R(x.value))},{default:a(()=>[i(" 确认 ")]),_:1})])]),default:a(()=>[u("div",je,[(_(!0),C(z,null,_e(f(E),(t,U)=>(_(),C("div",{key:t.name,class:"img-box",onClick:We=>k.value=U},[k.value===U?(_(),C("div",Oe,[e(D,{color:"#fff"},{default:a(()=>[e(te)]),_:1})])):fe("",!0),e(w,{style:{width:"148px",height:"148px"},src:t.url},null,8,["src"])],8,Ae))),128))])]),_:1},8,["modelValue"])],64)}}},Qe=ae(He,[["__scopeId","data-v-dd40cb7b"]]);export{Qe as default};
